= @unit.name

style
  - @unit.event_categories.each do |category|
    = "tr.event.#{ category.name.parameterize }-event .glyph svg { color: #{ category.color } }\n"

h1 Events

- if policy(:event).create?
  = link_to t(:event_add), '#newEventModal', id: 'new-event-button', class: 'btn btn-primary', data: { 'bs-toggle' => 'modal' }

- unless @events.count == 0

  p = link_to t(:event_subscribe), ''

  table.table-clickable
    thead
      tr
        th
        th.date = t(:event_date)
        th.days
        th.glyph.desktop
        th.title =t(:event_title)
        th.location.tablet =t(:event_location)
        th.action.desktop =t(:event_rsvp)
    tbody
      = render @events

= render 'form'


javascript:

  // links inside clickable rows should take priority, so we stop
  // propagation on them
  var links = document.getElementsByClassName('event-rsvp-link');
  for (const link of links) {
    link.addEventListener('click', function(event) {
      event.stopPropagation();
    });
  }

scss:
  .event-rsvp-link {
    z-index: 1000;
  }

  .daynames {
    font-size: 0.75rem;
    // margin-left: 1rem;
    text-transform: uppercase;
    color: #888;
  }

  tr.event {
    td.month {
      font-weight: bold;
    }

    td.glyph {
      text-align: center;
    }
  }

  input[type="date"].error {
    background-color: #ffffcc;
    animation: shake 0.6s 0s;
  }

  @keyframes pulse-animation {
    0% {
      box-shadow: 0 0 0 0px rgba(0, 0, 0, 0.2);
    }
    100% {
      box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);
    }
  }

  @keyframes wiggle {
     0% { transform: skewX(9deg); }
     10% { transform: skewX(-8deg); }
     20% { transform: skewX(7deg); }
     30% { transform: skewX(-6deg); }
     40% { transform: skewX(5deg); }
     50% { transform: skewX(-4deg); }
     60% { transform: skewX(3deg); }
     70% { transform: skewX(-2deg); }
     80% { transform: skewX(1deg); }
     90% { transform: skewX(0deg); }
     100% { transform: skewX(0deg); }
  }

  @keyframes shake {
   0%, 100% {transform: translateX(0);}
   10%, 30%, 50%, 70%, 90% {transform: translateX(-5px);}
   20%, 40%, 60%, 80% {transform: translateX(5px);}
  }

  tr.camping-event {
    td:first-child {
      border-left-color: green;
    }

    .glyph svg {
      color: green;
    }
  }

  tr.court_of_honor-event {
    td:first-child {
      border-left-color: GoldenRod;
    }

    .glyph svg {
      color: GoldenRod;
    }
  }

  tr.troop_meeting-event {
    td:first-child {
      border-left-color: FireBrick;
    }

    .glyph svg {
      color: FireBrick;
    }
  }

  .rsvp-response svg {
    margin-right: 0.2rem;
    color: #ccc;
  }

  .rsvp-accepted svg {
    color: green;
  }

  .rsvp-declined svg {
    color: red;
  }

  td.action {
    font-size: 75%;

    ul {
      list-style: none;
      margin: 0;
      padding: 1px 0 0 0;

      li {
        display: inline-block;
        padding: 0 0.5rem 0 0;
      }
    }

    a.btn {
      padding-top: 1px !important;
      padding-bottom: 1px !important;
      font-size: 90%;
    }
  }
